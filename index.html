<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: #65596a;
        }
        .man {
            width: 128px;
            height: 128px;
            background: url("man.gif") no-repeat -332px -136px;
            position: absolute;
        }
        .man.left {
            background-position: -200px -136px;
        }
        .man.bottom {
            background-position: -332px -4px;
        }
        .man.top {
            background-position: -332px -268px;
        }
        .man.right {
            background-position: -464px -136px;
        }
    </style>
</head>
<body>
    <div class="man" id="man" style="left: 0;top: 0;"></div>
    <script>
        const man = document.getElementById('man');
        let down = false;
        let played = false;
        document.addEventListener('keydown', () => {
            if (played) return;
            (new Audio('super-mario-saundtrek.mp3')).play();
            played = true;
        });
        document.addEventListener('keydown', (e) => {
            console.log(e)
            if (down) return;
            down = true;
            switch (e.code) {
                case 'ArrowUp': {
                    man.className = 'man top';
                    break;
                }
                case 'ArrowDown': {
                    man.className = 'man bottom';
                    break;
                }
                case 'ArrowLeft': {
                    man.className = 'man left';
                    break;
                }
                case 'ArrowRight': {
                    man.className = 'man right';
                    break;
                }
            }

            const int = setInterval(() => {
                let left = parseInt(man.style.left);
                let top = parseInt(man.style.top);

                switch (e.code) {
                    case 'ArrowUp': {
                        top = Math.max(top - 1, 0);
                        break;
                    }
                    case 'ArrowDown': {
                        top = Math.min(top + 1, document.body.clientHeight - 128);
                        break;
                    }
                    case 'ArrowLeft': {
                        left = Math.max(left - 1, 0);
                        break;
                    }
                    case 'ArrowRight': {
                        left = Math.min(left + 1, document.body.clientWidth - 128);
                        break;
                    }
                }
                man.style.left = left + 'px';
                man.style.top = top + 'px';
            }, 10);

            document.addEventListener('keyup', () => {
                clearInterval(int);
                man.className = 'man';
                down = false;
            })
        })
    </script>
</body>
</html>